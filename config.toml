# ==========================================================
# config.toml — Transcrição com controle fino
# ==========================================================

[transcription]
# Estratégia geral de modelo:
# fast | balanced | high_quality
target = "balanced"

# Idioma padrão para o Whisper (ISO 639-1)
default_language = "pt"

# none | soft | strict
cleaning_mode = "strict"


# ==========================================================
# LIMPEZA DE ALUCINAÇÃO / CAUDA (JÁ EXISTENTE)
# ==========================================================
[transcription.cleaning]

min_words_for_checks = 50
max_tail_window_words = 150
diversity_threshold = 0.12
min_repeats_for_tail_cut = 8

hard_patterns = [
  " e o que é o que é",
  " e o que é o que e",
  " e o que que é o que",
  " o que é o que é o que é o que é"
]


# ==========================================================
# ORALIDADE (NOVO — CONTROLE DE FALA INFORMAL)
# ==========================================================
[transcription.orality]

# Liga/desliga normalização de oralidade
enabled = true

# Termos removidos ou suavizados
terms = [
  "né",
  "tá",
  "ok",
  "beleza",
  "ah",
  "hum",
  "hã"
]


# ==========================================================
# SEGMENTAÇÃO POR PAUSA (NOVO — LEGIBILIDADE)
# ==========================================================
[transcription.segmentation]

# Pausa mínima (segundos) para encerrar frase
sentence_pause_sec = 0.6

# Pausa mínima (segundos) para quebrar parágrafo
paragraph_pause_sec = 1.2


# ==========================================================
# REPETIÇÃO DISCURSIVA (NOVO — FLUIDEZ)
# ==========================================================
[transcription.repetition]

enabled = true

# Quantas vezes a mesma palavra pode se repetir seguidamente
max_consecutive = 1


# ==========================================================
# CORREÇÕES DE TERMOS TÉCNICOS (NOVO — PRECISÃO)
# ==========================================================
[transcription.term_corrections]

"iscos" = "riscos"
"iscos inerentes" = "riscos inerentes"
"cônis" = "cones"
"conis" = "cones"
"variedade da cnh" = "validade da cnh"


# ==========================================================
# PARÂMETROS DO WHISPER (JÁ EXISTENTE)
# ==========================================================
[transcription.whisper]

no_speech_threshold = 0.3
logprob_threshold = -1.0
temperature = 0.0
condition_on_previous_text = false


# ==========================================================
# PATHS (JÁ EXISTENTE)
# ==========================================================
[paths]

base_output = "output"
audio_dir = "audio"
transcripts_dir = "transcripts"
markdown_dir = "md"


# ==========================================================
# UI / PERFIL PADRÃO (JÁ EXISTENTE)
# ==========================================================
[ui]

default_session_type = "reuniao"
# ==========================================================
# PERFIS DE TRANSCRIÇÃO POR TIPO DE SESSÃO
# ==========================================================

[profiles]

# ----------------------------------------------------------
# REUNIÃO INTERNA
# ----------------------------------------------------------
[profiles.reuniao_interna]

cleaning_mode = "strict"

[profiles.reuniao_interna.orality]
enabled = true

[profiles.reuniao_interna.segmentation]
sentence_pause_sec = 0.6
paragraph_pause_sec = 1.0

[profiles.reuniao_interna.repetition]
enabled = true
max_consecutive = 1


# ----------------------------------------------------------
# REUNIÃO EXTERNA (clientes / fornecedores)
# ----------------------------------------------------------
[profiles.reuniao_externa]

cleaning_mode = "strict"

[profiles.reuniao_externa.orality]
enabled = true

[profiles.reuniao_externa.segmentation]
sentence_pause_sec = 0.5
paragraph_pause_sec = 0.9

[profiles.reuniao_externa.repetition]
enabled = true
max_consecutive = 1


# ----------------------------------------------------------
# TREINAMENTO
# ----------------------------------------------------------
[profiles.treinamento]

cleaning_mode = "soft"

[profiles.treinamento.orality]
enabled = true

[profiles.treinamento.segmentation]
sentence_pause_sec = 0.7
paragraph_pause_sec = 1.3

[profiles.treinamento.repetition]
enabled = true
max_consecutive = 2

[profiles.treinamento.whisper]
no_speech_threshold = 0.25


# ----------------------------------------------------------
# CURSO (conteúdo didático)
# ----------------------------------------------------------
[profiles.curso]

cleaning_mode = "soft"

[profiles.curso.orality]
enabled = false   # preserva mais a fala do instrutor

[profiles.curso.segmentation]
sentence_pause_sec = 0.8
paragraph_pause_sec = 1.5

[profiles.curso.repetition]
enabled = false   # repetições podem ter valor didático


# ----------------------------------------------------------
# OUTRO / GENÉRICO
# ----------------------------------------------------------
[profiles.outro]

cleaning_mode = "balanced"

[profiles.outro.orality]
enabled = true

[profiles.outro.segmentation]
sentence_pause_sec = 0.6
paragraph_pause_sec = 1.2

[profiles.outro.repetition]
enabled = true
max_consecutive = 1


